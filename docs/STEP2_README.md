## STEP2 - 부하 테스트

### 요구사항
* 부하 테스트
  * 테스트 전제 조건 정리 
    * 대상 시스템 범위
    * 목푯값 설정 (latency, throughput, 부하 유지기간)
    * 부하 테스트 시 저장될 데이터 건수 및 크기 
  * 각 시나리오에 맞춰 스크립트 작성
    * 접속 빈도가 높은 페이지
    * 데이터를 갱신하는 페이지
    * 데이터를 조회하는데 여러 데이터를 참조하는 페이지
  * Smoke, Load, Stress 테스트 후 결과를 기록 

### 용어 정리
* DAU
  * 예상 1일 사용자 수 
  * Daily Active User

* RPS 
  * Request Per Second

* Smoke Test
  * 최소한의 부하를 견딜 수 있는 지 테스트

* Load Test
  * 평균 트래픽일 경우와 최대 트래픽을 경우를 나눠서 테스트 

* Stress Test
  * 최대 사용자, 최대 처리량 등 한계점을 확인
  * 점진적으로 부하가 증가하도록 구성

### 목표 RPS
* **1일 사용자 수 (DAU) : 37만**
    * 네이버 지도 순 이용자수 (MAU): 1380만
    * 카카오맵 순 이용자수 (MAU): 840만
      * 참고 : https://url.kr/4roc36
    * 두 경쟁사의 평균 MAU(1110만) / 30 (일) = 37만
* **피크 시간대 집중률 : 2**
  * 최대 트래픽 (출근 시간 최대 승하차 인원 12522명) / 평균 트래픽 (시간당 평균 승하차ㅏ 인원 5642) = 2.2
  * 참고 : https://insfiler.com/detail/rt_subway_time-0003

* **1명당 1일 평균 접속수 : 4회**
  * 출근 2회, 퇴근 2회

* **Throughput 계산 : 17rps ~ 37.4rps**
  * 1일 총 접속 수 : 148만
    * DAU 37만 * 4
  * 1일 평균 rps : 17rps
    * 148만/86400 = 17rps
  * 1일 최대 rps : 34rps
    * 1일 평균 rps (17rps) * 2.2 = 37.4rps

* latency: 100ms
* T 
  * (R * http_req_duration) (+ 1s)
  * (4 * 0.1) + 1 = 1.4
* **평균 VUser : 5.95**
  * (1일 평균 rps * T) / R 
  * (17 * 1.4) / 4 = 5.95
* **최대 VUser : 13.09**
  * (1일 최대 rps * T) / R
  * (37.4 * 1.4) / 4 = 13.09

